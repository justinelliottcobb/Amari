# v1.0.0 Migration Guide

This guide helps you migrate from v0.x to v1.0.0.

## From v0.17.x

### TropicalMultivector Changes

**Before (v0.17.x):**
```rust
use amari_tropical::TropicalMultivector;

let mv = TropicalMultivector::<f64>::new();
```

**After (v1.0.0):**
```rust
use amari_tropical::TropicalMultivector;

// Now requires signature parameters
let mv = TropicalMultivector::<f64, 3, 0, 0>::new();
```

### Removed APIs

The following APIs were removed in v1.0.0:

| Removed | Alternative |
|---------|-------------|
| `max_element()` | Use `tropical_norm()` or iterate coefficients |
| `forward_mode_ad()` | Use `amari_dual::DualNumber` directly |
| Conversion utilities | Use WASM bindings or implement manually |

### Conversion Example

**Before:**
```rust
use amari::convert_to_tropical;

let tropical = convert_to_tropical(&multivector);
```

**After:**
```rust
use amari_tropical::TropicalMultivector;

// Manual conversion
let coeffs: Vec<_> = (0..8).map(|i| multivector.get(i)).collect();
let tropical = TropicalMultivector::<f64, 3, 0, 0>::from_components(coeffs)?;
```

## From v0.12.x to v0.17.x

### Signature Parameter Order

The signature parameter order was standardized:

**Before:**
```rust
Multivector<3, 0, 0>  // Could vary
```

**After:**
```rust
Multivector<P, Q, R>  // Always (positive, negative, zero)
```

### Feature Flag Changes

| Old Feature | New Feature |
|-------------|-------------|
| `std-math` | `std` |
| `gpu-compute` | `gpu` |
| `wasm-bindgen` | (always enabled for amari-wasm) |

## From v0.8.x to v0.12.x

### Error Handling

**Before:**
```rust
let result = operation();  // Returns Option<T>
```

**After:**
```rust
let result = operation()?;  // Returns Result<T, Error>
```

### Module Reorganization

Several modules were reorganized:

| Old Location | New Location |
|--------------|--------------|
| `amari::ga::*` | `amari_core::*` |
| `amari::ad::*` | `amari_dual::*` |
| `amari::tropical::*` | `amari_tropical::*` |

## Dependency Updates

### Minimum Rust Version

v1.0.0 requires Rust 1.75+ for const generic features.

### External Dependencies

| Dependency | v0.17 | v1.0.0 |
|------------|-------|--------|
| nalgebra | 0.32 | 0.32 |
| num-traits | 0.2 | 0.2 |
| thiserror | 1.0 | 2.0 |
| wasm-bindgen | 0.2.92 | 0.2.95 |

## Testing Your Migration

1. Update `Cargo.toml`:
   ```toml
   [dependencies]
   amari = "1.0"
   ```

2. Run `cargo check` to find compile errors

3. Address each error using this guide

4. Run your test suite:
   ```bash
   cargo test
   ```

5. Check for deprecation warnings:
   ```bash
   cargo clippy
   ```

## Getting Help

If you encounter migration issues:

1. Check the [API documentation](https://docs.rs/amari)
2. Search [existing issues](https://github.com/justinelliottcobb/Amari/issues)
3. Open a new issue with the `migration` label
